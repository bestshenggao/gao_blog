---
title:  viewport
date: 2022-08-08
description: viewport 理解（mdn 翻译）
---

# viewport

这篇文章主要介绍如何使用 `viewport` 标签去控制页面视图的大小和状态。

## 背景

浏览器的视窗（`viewport`）是可以看到网页内容的窗口区域，它通常和所渲染的页面大小不一致，页面可能会更大一些，在这种情况下，浏览器会为用户提供一个滚动条供用户滚动并查看所有的内容。

一些较小的屏幕会在一个虚拟的窗口（`window`）或者视图（`viewport`）中渲染页面，页面通常会比屏幕要宽，因此页面会被收缩直到它能被一下子全看到。然后用户可以移动并放大页面的不同区域。例如，如果一个移动端的屏幕宽为640px,页面有可能会渲染在一个980px的视窗（`virtual viewport`）中，然后浏览器将会缩放这个页面直到它能适配640px的空间。

之所以这样做是因为不是所有的页面都会为移动端做优化，当页面在一个较小的窗口中展示的时候，如果不做适配，将会被截断，也就是展示不全。因此，这个虚拟视图（`virtual viewport`）会让 pc 上的网站在小屏幕上看起来更好。

然而这也不是一个万全之策，特别针对于使用媒体查询的网站。例如，如果视图窗口（`virtual viewoprt`）是980px，每天查询限制大小在 640px 或者 480px 甚至更小的时候将永远不会被使用到，媒体查询的作用将会大打折扣。因此，`viewport` 标签就能解决视图窗口在小屏幕上渲染所导致的问题。

## viewport 基础

一个适配移动端的站点会包含下面这一句：

```html
  <meta name="viewport" content="width=device-width, initial-scale=1">
```

不是所有的设备具有相同的宽度，你应该确保你的页面能够适配不同的屏幕宽度以及屏幕方向的变化。

**viewPort** `<meta>` 标签包括以下基础的属性：

`width`

控制视图窗口的大小。它可以设置一个具体的像素值，比如 `width=600` 或者一个特殊值 `device-width`，它代表 100vw，或者视窗宽度的 100%。最小值：`1`，最大值：`10000` ，**负值会被忽略**。

`height`

控制视图窗口的大小。它可以设置一个具体的像素值，比如 `height=400` 或者一个特殊值 `device-height`，它代表 100vh，或者视窗高度的 100%。最小值：`1`，最大值：`10000`，
**负值会被忽略**。

`initial-scale`

控制页面的缩放比例，当页面第一次加载的时候。最小值：`0.1`，最大值：`10`。默认值：`1`，**负值会被忽略**。

`minimum-scale`

控制页面的最小缩放比例。最小值：`0.1`，最大值：`10`，默认值：0.1，**负值将会被忽略**。

`maximum-scale`

控制页面的最大放大比例。**如果值小于3属性都会失效**。最小值：`0.1`，最大值：`10`，默认值：`10`。**负值会被忽略**。

`user-scalable`

控制是否可以在页面上进行放大和缩小操作。有效的值是：`0`，`1`，`yes`，或者 `no`。默认值：`1`，和 `yes` 作用一致。同理，设置 value 为 `0` 和 `no` 作用是一致的。

## 屏幕密度（Screen density）

随着屏幕像素的增加，单个像素已经无法被人眼识别。例如，智能手机有许多小屏幕，他们的像素比上升到了 1920-1080 像素（大约 400dpi）。所以，大多数的浏览器在呈现页面的时候，会把多个`物理像素`转换成`逻辑像素`。最初，这在移动端触屏网站上导致了许多可用性和可读性的问题。

在 dpi 较高的屏幕上，设置 `initial-scale=1` 的页面将被浏览器有效的缩放。它们的文字变的平滑而清晰，但是页面上的位图（bitmap images）将不会利用全部的屏幕分辨率的优势。为了在这些屏幕上得到高质量的图片，web 开发人员会在图片的设计或者页面整体的布局上去想办法-放大最终页面的尺寸然后再使用 CSS 或者 viewport 的属性去缩小他们。

默认的像素比取决于屏幕的像素显示密度。在低于 200dpi 的像素密度下，比例是 1.0。像素密度在 200 和 300dpi 之间，比例是 1.5。像素密度超过 300dpi 的屏幕，比例是（屏幕密度/150dpi）运算结果向下取整的整数。注意，只有在 viewport scale 等于 1 的时候默认的比例才会生效。否则，逻辑像素和物理像素之间的换算关系将会依赖于当前的缩放比。

## viewport 的宽度和 screen 的宽度

网站可以将其 viewport 设置为特定的大小。例如，可以使用定义 "width = 320，initialscale = 1" 来精确地适应小屏手机在纵向模式下的显示。当浏览器没有以更大的尺寸呈现页面时，这可能会导致问题。为了解决这个问题，在必要时，浏览器会扩大视窗宽度，以按要求的比例填充屏幕。这在大屏幕设备上特别有用。

对于设置了初始比例或者最大比例的页面，这意味着 width 属性实际上转换为最小视窗宽度。例如，如果布局需要至少 500px 的宽度，那么您可以使用以下标记。
```html
<meta name="viewport" content="width=500, initial-scale=1">
```
当屏幕宽度超过500像素时，浏览器将扩展视窗(而不是放大)以适应屏幕。

可用的其他属性包括 `minimum-scale`，`maximum-scale` 和 `user-scalable`。这些属性会影响初始缩放和宽度，并限制缩放级别的更改。